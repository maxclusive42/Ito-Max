<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>ito ‚Äì ‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏≥‡πÄ‡∏≠‡∏á‡∏Ç‡∏≥ ‡πÜ </title>
  <style>
    :root {
      --bg:#0f172a;          /* slate-900 */
      --card:#111827;        /* gray-900 */
      --muted:#94a3b8;       /* slate-400 */
      --text:#e5e7eb;        /* gray-200 */
      --accent:#22d3ee;      /* cyan-400 */
      --accent-2:#a78bfa;    /* violet-400 */
      --good:#34d399;        /* green-400 */
      --bad:#fb7185;         /* rose-400 */
      --shadow: 0 8px 30px rgba(0,0,0,.35);
      --radius: 20px;
    }
    html,body{height:100%;}
    body{margin:0;background:linear-gradient(160deg,#0b1223,#121a35 50%,#0b1223);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple Color Emoji,Segoe UI Emoji,Helvetica,Arial,sans-serif;}

    .wrap{max-width:900px;margin:0 auto;padding:18px 16px 80px;}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin:6px 0 18px;}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:44px;height:44px;border-radius:12px;background:radial-gradient(circle at 30% 30%, var(--accent), transparent 40%), radial-gradient(circle at 70% 70%, var(--accent-2), transparent 40%), #0d1b2a; box-shadow:var(--shadow);}
    h1{font-size:22px;margin:0;letter-spacing:.3px}
    .sub{color:var(--muted);font-size:13px;margin-top:2px}

    .tabs{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin:10px 0 18px}
    .tab{background:#0b1020;border:1px solid rgba(255,255,255,.08);border-radius:999px;padding:10px 14px;text-align:center;color:var(--muted);cursor:pointer;user-select:none}
    .tab.active{background:linear-gradient(120deg,rgba(34,211,238,.15),rgba(167,139,250,.15));color:var(--text);border-color:rgba(255,255,255,.15)}

    .card{background:rgba(17,24,39,.8);border:1px solid rgba(255,255,255,.06);backdrop-filter: blur(8px); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow)}
    .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
    .row > *{flex:1}

    button{background:linear-gradient(120deg, rgba(34,211,238,.15), rgba(167,139,250,.15));border:1px solid rgba(255,255,255,.15);color:var(--text);padding:12px 14px;border-radius:14px;cursor:pointer;font-size:16px}
    button:active{transform:translateY(1px)}
    .btn-plain{background:transparent;border-color:rgba(255,255,255,.12);}
    .btn-good{background:rgba(52,211,153,.15);border-color:rgba(52,211,153,.4)}
    .btn-bad{background:rgba(251,113,133,.12);border-color:rgba(251,113,133,.4)}

    input, textarea{width:100%;background:#0b1020;border:1px solid rgba(255,255,255,.1);color:var(--text);padding:12px 14px;border-radius:12px;font-size:16px}
    label{font-size:13px;color:var(--muted)}

    .topic{font-size:24px;line-height:1.3;margin:6px 0 2px}
    .hint{font-size:13px;color:var(--muted)}

    .pill{display:inline-flex;align-items:center;gap:8px;background:#0b1020;border:1px solid rgba(255,255,255,.08);padding:8px 12px;border-radius:999px}
    .chips{display:flex;flex-wrap:wrap;gap:8px}

    /* Players */
    .players{display:grid;grid-template-columns:repeat(auto-fill, minmax(180px,1fr));gap:12px}
    .p-card{background:#0b1020;border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:12px}
    .p-name{font-weight:600}
    .secret{font-size:40px;font-weight:800;letter-spacing:1px;margin:8px 0}
    .secret.hidden{filter:blur(20px); color: #0D1326; opacity: 1;}

    /* Drag Sort */
    .sortable{display:grid;grid-template-columns:1fr;gap:10px;margin-top:8px}
    .item{background:#0b1020;border:1px dashed rgba(255,255,255,.15);padding:12px;border-radius:14px;display:flex;align-items:center;justify-content:space-between;gap:10px}
    .handle{font-size:18px;opacity:.7;cursor:grab}

    .foot{position:fixed;left:0;right:0;bottom:0;padding:10px;background:linear-gradient(180deg, transparent, rgba(0,0,0,.45));}
    .foot .bar{max-width:900px;margin:0 auto;background:rgba(10,14,30,.9);border:1px solid rgba(255,255,255,.08);border-radius:14px;display:flex;gap:8px;padding:8px;backdrop-filter: blur(6px)}
    .foot button{flex:1}

    @media (min-width: 740px){
      .topic{font-size:28px}
    }
/* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏â‡∏•‡∏¢‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö --- */
.item {
  justify-content: space-between; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
}
.order-name {
  flex-grow: 1; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏¢‡∏∑‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á */
}
.order-number {
  font-size: 22px;
  font-weight: 700;
  color: var(--good); /* ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á */
  min-width: 30px;
  text-align: right;
  margin: 0 10px;
}
.order-number.hidden {
  display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÑ‡∏ß‡πâ‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å */
}
.order-actions {
  display: flex;
  align-items: center;
  gap: 16px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏â‡∏•‡∏¢‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏•‡∏≤‡∏Å */
}
.btn-reveal {
  background: rgba(255,255,255,.05);
  border: 1px solid rgba(255,255,255,.2);
  color: var(--muted);
  padding: 5px 12px;
  font-size: 13px;
  border-radius: 10px;
  cursor: pointer;
  transition: background .2s;
}
.btn-reveal:hover {
  background: rgba(255,255,255,.1);
}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>ito ‚Äì ‡∏â‡∏ö‡∏±‡∏ö‡∏ó‡∏≥‡πÄ‡∏≠‡∏á‡∏Ç‡∏≥ ‡πÜ </h1>
          <div class="sub">‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå ‚Ä¢ ‡πÅ‡∏à‡∏Å‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö ‚Ä¢ ‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö (‡πÇ‡∏´‡∏°‡∏î‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå)</div>
        </div>
      </div>
      <button class="btn-plain" id="btnReset">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°</button>
    </header>

    <div class="tabs">
      <div class="tab active" data-tab="topics">‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå</div>
      <div class="tab" data-tab="numbers">‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</div>
      <div class="tab" data-tab="order">‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö</div>
    </div>

    <!-- TOPIC CARD -->
    <section id="tab-topics" class="card">
      <div class="row" style="align-items:flex-end;gap:10px">
        <div style="flex:2">
          <label>‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ</label>
          <div id="topicText" class="topic">‚Äî</div>
          <div class="hint">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‚Äú‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°</div>
        </div>
        <div style="flex:1;min-width:160px">
          <button id="btnRandomTopic">üé≤ ‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå</button>
        </div>
      </div>

      <details style="margin-top:12px"><summary class="hint">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (100)</summary>
        <div id="allTopics" class="chips" style="margin-top:10px"></div>
      </details>
    </section>

    <!-- NUMBERS CARD -->
    <section id="tab-numbers" class="card" style="display:none">
      <div class="row" style="gap:10px">
        <div>
          <label>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏à‡∏∏‡∏•‡∏†‡∏≤‡∏Ñ , )</label>
          <input id="namesInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏≠‡πä‡∏ï, ‡πÄ‡∏°‡∏¢‡πå, ‡πÇ‡∏ü‡∏Å‡∏±‡∏™, ‡∏õ‡∏¥‡πà‡∏ô" />
        </div>
      </div>
      <div class="row" style="margin-top:10px">
        <button id="btnSetPlayers" class="btn-good">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</button>
        <button id="btnDeal" class="">‡πÅ‡∏à‡∏Å‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö 1‚Äì100 (‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥)</button>
      </div>

      <div id="players" class="players" style="margin-top:12px"></div>
      <div class="hint" style="margin-top:8px">* ‡πÇ‡∏´‡∏°‡∏î‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: ‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô‡∏Å‡∏î ‚Äú‡∏î‡∏π‡πÄ‡∏•‡∏Ç‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‚Äù ‡πÄ‡∏•‡∏Ç‡∏à‡∏∞‡πÇ‡∏ä‡∏ß‡πå 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡∏ã‡πà‡∏≠‡∏ô</div>
    </section>

    <!-- ORDER CARD -->
    <section id="tab-order" class="card" style="display:none">
      <div class="row">
        <div style="flex:1">
          <label>‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å ‚Äú‡∏ô‡πâ‡∏≠‡∏¢ ‚Üí ‡∏°‡∏≤‡∏Å‚Äù</label>
          <div id="sortable" class="sortable"></div>
        </div>
      </div>
      <div class="row" style="margin-top:10px">
        <button id="btnExportOrder" class="btn-plain">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö</button>
        <button id="btnClearOrder" class="btn-bad">‡∏•‡πâ‡∏≤‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö</button>
      </div>
    </section>
  </div>

  <div class="foot">
    <div class="bar">
      <button data-tabto="topics">‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå</button>
      <button data-tabto="numbers">‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö</button>
      <button data-tabto="order">‡∏à‡∏±‡∏î‡∏•‡∏≥‡∏î‡∏±‡∏ö</button>
    </div>
  </div>

<script>
// --- Topics (100) ---
const TOPICS = [
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ú‡πá‡∏î‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ô‡∏°","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏°‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡πÅ‡∏ü‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏≤","‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
  "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏£‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß‡∏Ç‡∏≠‡∏á‡∏ú‡∏•‡πÑ‡∏°‡πâ",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏π‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏¥‡πà‡∏°‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏≤‡∏ô",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå","‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πà‡∏á/‡∏ö‡∏¥‡∏ô",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏≤‡∏¢‡∏∏‡∏¢‡∏∑‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏°‡∏µ‡∏û‡∏¥‡∏©","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏≤‡∏¢‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏£‡∏≤‡∏°‡πà‡∏≤‡πÉ‡∏ô‡∏´‡∏ô‡∏±‡∏á/‡∏ã‡∏µ‡∏£‡∏µ‡∏™‡πå","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏£‡πâ‡∏≤‡∏¢",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏®‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ï‡∏≠‡∏ô‡∏à‡∏ö","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏ú‡∏µ","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡∏±‡∏á","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡πá‡∏≠‡∏ï‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏°",
  "‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏≠‡∏≠‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà","‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡∏°",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ß","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡πÄ‡∏ö‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á",
  "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡πá‡∏ô‡πÄ‡∏ó‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏ñ‡∏≠‡∏î‡∏£‡∏≠‡∏á‡πÄ‡∏ó‡πâ‡∏≤","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏´‡∏á‡∏∏‡∏î‡∏´‡∏á‡∏¥‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏¥‡∏ß","‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏Å‡∏£‡∏ò‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡∏ß",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏µ‡∏¢‡∏à‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏´‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π‡∏ï‡∏≠‡∏ô‡∏™‡∏°‡∏±‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ô",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á‡∏•‡∏≤‡∏¢‡∏ö‡∏ô‡∏ñ‡∏∏‡∏á‡∏Ç‡∏¢‡∏∞","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏£‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡πÅ‡∏ä‡∏ó‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏®‡∏£‡πâ‡∏≤‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏à‡∏≠‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠",
  "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡πà‡∏ß‡∏á","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏¥‡∏ß","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î‡∏à‡∏≤‡∏Å‡∏á‡∏≤‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏Ç‡∏≤",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏î‡∏î","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô‡πÉ‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≥",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏û‡πÄ‡∏£‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏¥‡∏î‡∏´‡∏π‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏≠‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÄ‡∏û‡∏•‡∏á",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏ß‡∏Å‡∏´‡∏π‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ö‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡πà‡∏≤/‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á","‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏","‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡∏£‡∏≤‡∏∞‡∏ö‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏™‡∏î‡∏∏",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏≤‡∏¢‡∏≤‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏∞‡∏™‡∏°",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏†‡∏π‡πÄ‡∏Ç‡∏≤","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡∏ó‡∏∞‡πÄ‡∏•","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏£‡∏á‡∏Ç‡∏≠‡∏á‡∏•‡∏°","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á‡∏û‡∏£‡∏∞‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏ï‡∏Å",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡πÅ‡∏™‡∏ô‡πâ‡∏≥","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏≤‡∏∞","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏£‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ú‡πà‡∏ô‡∏î‡∏¥‡∏ô‡πÑ‡∏´‡∏ß",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ",
  "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡πä‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏õ‡∏≤‡∏Å‡∏ï‡∏≠‡∏ô‡∏ï‡∏∑‡πà‡∏ô‡∏ô‡∏≠‡∏ô","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏£‡∏≤‡∏°‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏ó","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡∏£‡∏µ‡πâ‡∏¢‡∏ß‡∏Å‡∏£‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏ö‡∏≠‡∏™","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏µ‡πâ‡∏•‡∏∑‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á",
  "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏á‡∏≤‡∏ô‡∏´‡∏≤‡∏¢","‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≠‡∏á‡πÅ‡∏°‡∏ß","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÇ‡∏Å‡∏´‡∏Å","‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏à‡∏£‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏ö‡∏≠‡∏Å"
];

// --- Helpers ---
const $ = (sel)=>document.querySelector(sel);
const $$ = (sel)=>Array.from(document.querySelectorAll(sel));

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

function copyText(text){
  navigator.clipboard?.writeText(text);
}

// --- Tabs ---
$$('.tab').forEach(t=>t.addEventListener('click', ()=>switchTab(t.dataset.tab)));
$$('[data-tabto]').forEach(b=>b.addEventListener('click', ()=>switchTab(b.dataset.tabto)));
function switchTab(key){
  $$('.tab').forEach(t=>t.classList.toggle('active', t.dataset.tab===key));
  $('#tab-topics').style.display = key==='topics'? 'block':'none';
  $('#tab-numbers').style.display = key==='numbers'? 'block':'none';
  $('#tab-order').style.display = key==='order'? 'block':'none';
}

// --- Topic logic ---
const topicText = $('#topicText');
$('#btnRandomTopic').addEventListener('click', ()=>{
  const t = TOPICS[Math.floor(Math.random()*TOPICS.length)];
  topicText.textContent = t;
});

// render all topics
const allTopics = $('#allTopics');
TOPICS.forEach(t=>{
  const s = document.createElement('span');
  s.className='pill'; s.textContent=t; allTopics.appendChild(s);
});

// --- Players & numbers ---
let PLAYERS = []; // [{name, number, revealed:false}]

$('#btnSetPlayers').addEventListener('click', ()=>{
  const raw = $('#namesInput').value.trim();
  const names = raw.split(',').map(s=>s.trim()).filter(Boolean);
  if(!names.length){ alert('‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞'); return; }
  PLAYERS = names.map(n=>({name:n, number:null, revealed:false}));
  renderPlayers();
  renderOrderList();
});

$('#btnDeal').addEventListener('click', ()=>{
  if(!PLAYERS.length){ alert('‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô'); return; }
  const deck = shuffle(Array.from({length:100}, (_,i)=>i+1));
  PLAYERS.forEach((p,i)=>{ p.number = deck[i]; p.revealed=false; });
  renderPlayers();
});

function renderPlayers(){
  const box = $('#players');
  box.innerHTML='';
  PLAYERS.forEach((p,idx)=>{
    const el = document.createElement('div');
    el.className = 'p-card';
    el.innerHTML = `
      <div class="p-name">${p.name}</div>
      <div class="secret ${p.revealed? '':'hidden'}" id="sec-${idx}">${p.number ?? '‚Äî'}</div>
      <div class="row" style="gap:8px">
        <button data-reveal="${idx}">‡∏î‡∏π‡πÄ‡∏•‡∏Ç‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô (3 ‡∏ß‡∏¥)</button>
        <button class="btn-plain" data-hide="${idx}">‡∏ã‡πà‡∏≠‡∏ô</button>
      </div>
    `;
    box.appendChild(el);
  });

  // bind
  $$('#players [data-reveal]').forEach(btn=>btn.addEventListener('click', ()=>{
    const i = +btn.dataset.reveal;
    if(PLAYERS[i].number==null){ alert('‡∏Å‡∏î "‡πÅ‡∏à‡∏Å‡πÄ‡∏•‡∏Ç‡∏•‡∏±‡∏ö" ‡∏Å‡πà‡∏≠‡∏ô'); return; }
    PLAYERS[i].revealed = true;
    const s = $(`#sec-${i}`); s.classList.remove('hidden');
    setTimeout(()=>{ s.classList.add('hidden'); PLAYERS[i].revealed=false; }, 3000);
  }));
  $$('#players [data-hide]').forEach(btn=>btn.addEventListener('click', ()=>{
    const i = +btn.dataset.hide; $(`#sec-${i}`).classList.add('hidden'); PLAYERS[i].revealed=false;
  }));
}

// --- Order / drag sort ---
const sortable = $('#sortable');
function renderOrderList(){
  sortable.innerHTML = '';
  PLAYERS.forEach((p,i)=>{
    const it = document.createElement('div');
    it.className = 'item';
    it.setAttribute('draggable','true');
    it.dataset.idx = i;
    // ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ HTML ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
    it.innerHTML = `
      <span class="order-name">${p.name}</span>
      <span class="order-number hidden">${p.number ?? '?'}</span>
      <div class="order-actions">
        <button class="btn-reveal">‡πÄ‡∏â‡∏•‡∏¢</button>
        <span class="handle">‚ò∞</span>
      </div>
    `;
    sortable.appendChild(it);
  });

  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏â‡∏•‡∏¢"
  $$('#sortable .btn-reveal').forEach(btn => {
    btn.addEventListener('click', (e) => {
      // ‡∏´‡∏≤‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
      const itemDiv = e.target.closest('.item');
      const numberSpan = itemDiv.querySelector('.order-number');
      
      // ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏â‡∏•‡∏¢
      if (numberSpan) {
        numberSpan.classList.remove('hidden');
      }
      e.target.style.display = 'none';
    });
  });
  
  bindDrag();
}

function bindDrag(){
  const items = $$('#sortable .item');
  let dragEl = null;

  items.forEach(it => {
    // === ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏°‡∏≤‡∏™‡πå (‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) ===
    it.addEventListener('dragstart', e => {
      dragEl = it;
      it.style.opacity = '.6';
    });
    it.addEventListener('dragend', e => {
      if (!dragEl) return;
      dragEl.style.opacity = '1';
      dragEl = null;
    });
    it.addEventListener('dragover', e => {
      e.preventDefault();
      const cur = it;
      if (!dragEl || cur === dragEl) return;
      const rect = cur.getBoundingClientRect();
      const before = (e.clientY - rect.top) < rect.height / 2;
      cur.parentNode.insertBefore(dragEl, before ? cur : cur.nextSibling);
    });

    // === ‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™ (‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤) ===
    it.addEventListener('touchstart', e => {
      dragEl = it;
      it.style.opacity = '.6';
    }, { passive: false });

    it.addEventListener('touchend', e => {
      if (!dragEl) return;
      dragEl.style.opacity = '1';
      dragEl = null;
    });

    it.addEventListener('touchmove', e => {
      e.preventDefault(); // ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏ô‡∏¥‡πâ‡∏ß
      if (!dragEl) return;

      const touchLocation = e.targetTouches[0];
      const elementOver = document.elementFromPoint(touchLocation.clientX, touchLocation.clientY);
      const cur = elementOver ? elementOver.closest('.item') : null;

      if (!cur || cur === dragEl) return;
      
      const rect = cur.getBoundingClientRect();
      const before = (touchLocation.clientY - rect.top) < rect.height / 2;
      cur.parentNode.insertBefore(dragEl, before ? cur : cur.nextSibling);
    }, { passive: false });
  });
}

$('#btnExportOrder').addEventListener('click', ()=>{
  const names = $$('#sortable .item').map(it=>it.querySelector('span').textContent);
  const text = '‡∏•‡∏≥‡∏î‡∏±‡∏ö (‡∏ô‡πâ‡∏≠‡∏¢‚Üí‡∏°‡∏≤‡∏Å): ' + names.join(' ‚Üí ');
  copyText(text);
  alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß\n\n'+text);
});

$('#btnClearOrder').addEventListener('click', ()=>{ renderOrderList(); });

// --- Reset ---
$('#btnReset').addEventListener('click', ()=>{
  if(!confirm('‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;
  $('#topicText').textContent='‚Äî';
  $('#namesInput').value='';
  PLAYERS=[]; renderPlayers(); renderOrderList();
  switchTab('topics');
});

// Default: show a random topic once
$('#btnRandomTopic').click();
</script>
</body>
</html>
